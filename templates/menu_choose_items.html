
{% extends "index_core.html" %}
{% block content %}

<div class="row">

  <div class="col-xs-6 col-md-12 mt-2">
      <h1 style="color: grey">Feeling Hungry?</h1>
      <h2 style="color: orange">Order some delish grub.</h2>
      <p>Based on personal preferences, create a restaurant order with whatever you're hungry for from in any or all of the categories; however, please know there's a limit of 1 item per category. 
      </p>
        {% if age_group == "0" %}
        <a href="#Kids" style="color: #44cc00">Kids</a> |
        {% else %}    
        <a href="#Entrees" style="color: #44cc00">Entrées</a> |
        {% endif %}
        <a href="#Sides" style="color: #44cc00">Sides</a> | 
        <a href="#Desserts" style="color: #44cc00">Desserts</a> | 
        <a href="#Beverages" style="color: #44cc00">Beverages</a>  
        {% if age_group == "2" %}
          | <a href="#alcohol" style="color: #44cc00">Adult Beverages</a>  
        {% endif %}    
       <p></p>
       <form id="orderform" method="POST" action="/checkout">
        <input type="hidden" id="selections" name="selections" value="{}">
        <input type="hidden" id="age_group" name="age_group" value={{ age_group }}>
        <div class="form-row" style="float: right;">
          <div class="form-group col-md-2">
            <button id="mysubmit" class="btn btn-primary">Go To Checkout</button>
          </div>
        </div>
        </form>
  </div>
</div>


<!--Products: Kids-->
{% if age_group == "0" %}
<a name="Kids"><h4>Kids</h4></a>
<div class="row">
{% for item in kids %}
  <div class="col-md-2">
    <div class="card mb-2 box-shadow">
      <img class="card-img-top food-img"  style="height: 100px; width: 100%; display: block;" src="/static/img/{{ item.img }}" data-holder-rendered="true">
      <div class="card-body" style ="height: 320px">
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group text-center">
            <button class="btn class_kids" id="{{ item.id }}" name="{{item.name}}" description="{{ item.display_desc }}" img="{{item.img}}" type="button"  style="color: orange"><strong>Add Item</strong></button>
          </div>
        </div>
        <p class="card-text"><strong>{{ item.name }}</strong> {{ item.display_desc }}</p>
        
      </div>
    </div>
  </div>
{% endfor %}
</div>
{% endif %}  


<!--Products: Entrees-->
{% if age_group != "0" %}
<a name="Entrees"><h4>Entrées</h4></a>
<div class="row mb-2">
{% for item in entrees %}
  <div class="col-md-2">
    <div class="card mb-2 box-shadow">
      <img class="card-img-top food-img"  style="height: 100px; width: 100%; display: block;" src="/static/img/{{ item.img }}" data-holder-rendered="true">
      <div class="card-body" style ="height: 320px">
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group text-center">
            <button class="btn class_entree" id="{{ item.id }}" name="{{item.name}}" description="{{ item.display_desc }}" img="{{item.img}}" type="button" style="color: orange"><strong>Add Item</strong></button>
          </div>
        </div>
        <p class="card-text"><strong>{{ item.name }}</strong> {{ item.display_desc }}</p>
        
      </div>
    </div>
  </div>
{% endfor %}
</div>
{% endif %}


<!--Products: Side Dishes-->
<section id="Sides"></section>
<div class="row mt-4">
  <div class="col">
    <h4>Sides</h4>
  </div>
</div>
<div class="row">
{% for item in side %}
  <div class="col-md-2">
    <div class="card mb-2 box-shadow">
      <img class="card-img-top food-img"  style="height: 100px; width: 100%; display: block;" src="/static/img/{{ item.img }}" data-holder-rendered="true">
      <div class="card-body" style ="height: 320px">
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group text-center">
            <!--Charla To Do: Change btn class to btn class_side and remove the curly braces/cat_id -->
            <button class="btn class_side" id="{{ item.id }}" name="{{item.name}}" description="{{ item.display_desc }}" img="{{item.img}}" type="button"  style="color: orange"><strong>Add Item</strong></button>
          </div>
        </div>
        <p class="card-text"><strong>{{ item.name }}</strong> {{ item.display_desc }}</p>
        
      </div>
    </div>
  </div>
{% endfor %}
</div>



<!--Products: Desserts-->
<section id="Desserts"></section>
<div class="row mt-4">
  <div class="col">
    <h4>Desserts</h4>
  </div>
</div>
<div class="row">
{% for item in dessert %}
  <div class="col-md-2">
    <div class="card mb-2 box-shadow">
      <img class="card-img-top food-img"  style="height: 100px; width: 100%; display: block;" src="/static/img/{{ item.img }}" data-holder-rendered="true">
      <div class="card-body" style ="height: 320px">
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group text-center">
            <button class="btn class_dessert" id="{{ item.id }}" name="{{item.name}}" description="{{ item.display_desc }}" img="{{item.img}}" type="button"  style="color: orange"><strong>Add Item</strong></button>
          </div>
        </div>
        <p class="card-text"><strong>{{ item.name }}</strong> {{ item.display_desc }}</p>
        
      </div>
    </div>
  </div>
{% endfor %}
</div>


<!--Products: Beverage-->
<section id="Beverages"></section>
<div class="row mt-4">
  <div class="col">
    <h4>Beverages</h4>
  </div>
</div>
<div class="row">
{% for item in beverage %}
  <div class="col-md-2">
    <div class="card mb-2 box-shadow">
      <img class="card-img-top food-img"  style="height: 100px; width: 100%; display: block;" src="/static/img/{{ item.img }}" data-holder-rendered="true">
      <div class="card-body" style ="height: 320px">
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group text-center">
            <button class="btn class_beverage" id="{{ item.id }}" name="{{item.name}}" description="{{ item.display_desc }}" img="{{item.img}}" type="button"  style="color: orange"><strong>Add Item</strong></button>
          </div>
        </div>
        <p class="card-text"><strong>{{ item.name }}</strong> {{ item.display_desc }}</p>
        
      </div>
    </div>
  </div>
{% endfor %}
</div>




<!--Products: Alcoholic Adult Beverages -->
{% if age_group == "2" %}
<section id="alcohol"></section>
<div class="row mt-4">
  <div class="col">
    <h4>Adult Beverages</h4>
  </div>
</div>
<div class="row">
{% for item in alcoholicBeverage %}
  <div class="col-md-2">
    <div class="card mb-2 box-shadow">
      <img class="card-img-top food-img"  style="height: 100px; width: 100%; display: block;" src="/static/img/{{ item.img }}" data-holder-rendered="true">
      <div class="card-body" style ="height: 320px">
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group text-center">
            <button class="btn class_alcoholicBeverage" id="{{ item.id }}" name="{{item.name}}" description="{{ item.display_desc }}" img="{{item.img}}" type="button"  style="color: orange"><strong>Add Item</strong></button>
          </div>
        </div>
        <p class="card-text"><strong>{{ item.name }}</strong> {{ item.display_desc }}</p>
        
      </div>
    </div>
  </div>
{% endfor %}
{% endif %}  
</div>

<p></p>

       <form id="orderform" method="POST" action="/checkout">
        <input type="hidden" id="selections" name="selections" value="{}">
        <input type="hidden" id="age_group" name="age_group" value={{ age_group }}>
        <div class="form-row" style="float: right;">
          <div class="form-group col-md-2">
            <button id="mysubmit" class="btn btn-primary">Go To Checkout</button>
          </div>
        </div>
        </form>
</div>
        <br>  
        <br>
        <br>






<!-- Begin JS for capturing selected items and disabling Add Item button upon click inside of each category -->
<script>

var selections = {};

//Entree selection
d3.selectAll(".class_entree").on('click', function()
    { 
      var id = d3.select(this).attr("id")
      console.log(id)

      selections['entree'] = id;
      console.log(selections);

      var name = d3.select(this).attr("name")
      console.log(name)

      var description = d3.select(this).attr("description")
      console.log(description)


      var img = d3.select(this).attr("img")
      console.log(img)


      console.log("An entree was added to the food order.");
      
      d3.selectAll('.class_entree').remove();
    });

//Side selection
d3.selectAll(".class_side").on('click', function()
    { 

      var id = d3.select(this).attr("id")
      console.log(id)

      selections['side'] = id;
      console.log(selections);

      var name = d3.select(this).attr("name")
      console.log(name)

      var description = d3.select(this).attr("description")
      console.log(description)


      var img = d3.select(this).attr("img")
      console.log(img)

      console.log("A side item was added to the food order.");
      
      d3.selectAll('.class_side').remove();
    });

//Dessert selection
d3.selectAll(".class_dessert").on('click', function()
    { 

      var id = d3.select(this).attr("id")
      console.log(id)

      selections['dessert'] = id;
      console.log(selections);

      var name = d3.select(this).attr("name")
      console.log(name)

      var description = d3.select(this).attr("description")
      console.log(description)


      var img = d3.select(this).attr("img")
      console.log(img)

      console.log("A dessert was added to the food order.");
      
      d3.selectAll('.class_dessert').remove();
    });


//Beverage selection
d3.selectAll(".class_beverage").on('click', function()
    { 


      var id = d3.select(this).attr("id")
      console.log(id)

      selections['beverage'] = id;
      console.log(selections);

      var name = d3.select(this).attr("name")
      console.log(name)

      var description = d3.select(this).attr("description")
      console.log(description)

      var img = d3.select(this).attr("img")
      console.log(img)

      console.log("A beverage was added to the food order.");
      
      d3.selectAll('.class_beverage').remove();
    });

//Adult Beverage selection
d3.selectAll(".class_alcoholicBeverage").on('click', function()
    { 

      var id = d3.select(this).attr("id")
      console.log(id)

      selections['alcohol'] = id;
      console.log(selections);

      var name = d3.select(this).attr("name")
      console.log(name)

      var description = d3.select(this).attr("description")
      console.log(description)


      var img = d3.select(this).attr("img")
      console.log(img)

      console.log("Booze was added to the food order.");
      
      d3.selectAll('.class_alcoholicBeverage').remove();
    });



//Kids selection
d3.selectAll(".class_kids").on('click', function()
    { 

      var id = d3.select(this).attr("id")
      console.log(id)

      selections['kids'] = id;
      console.log(selections);

      var name = d3.select(this).attr("name")
      console.log(name)

      var description = d3.select(this).attr("description")
      console.log(description)


      var img = d3.select(this).attr("img")
      console.log(img)

      console.log("A kids item was added to the food order.");
      
      d3.selectAll('.class_kids').remove();
    });

  d3.selectAll("#mysubmit")
      .on("click", function () {
        d3.event.stopPropagation();
        d3.event.preventDefault();
        console.log("Hi!");
        console.log(selections);
        if (jQuery.isEmptyObject(selections)) {
          alert("Please select at least one item!");
        } else {
          d3.select("#selections").attr("value", JSON.stringify(selections));
          var form = d3.select("#orderform").node();
          form.submit();
        }
      });


</script> 

 

{% endblock %}


